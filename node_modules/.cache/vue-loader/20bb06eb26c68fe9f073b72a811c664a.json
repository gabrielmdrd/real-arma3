{"remainingRequest":"/home/pi/real-arma3/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/pi/real-arma3/src/components/pages/basket.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/pi/real-arma3/src/components/pages/basket.vue","mtime":1542584713169},{"path":"/home/pi/real-arma3/node_modules/cache-loader/dist/cjs.js","mtime":1539850667000},{"path":"/home/pi/real-arma3/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/pi/real-arma3/node_modules/cache-loader/dist/cjs.js","mtime":1539850667000},{"path":"/home/pi/real-arma3/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport axios from '../../../node_modules/axios'\nexport default {\n    name: \"basket\",\n    data(){\n        return {\n            basket: this.$session.get('basket'),\n        }\n    },\n    methods : {\n        removeFromBasket(id) {\n            for (let i = 0; i < this.basket.length; i++) {\n                if (this.basket[i].id == id) {\n                    this.basket.splice(i, 1);\n                    this.$session.set('basket', this.basket);\n                }\n            }\n            console.log(this.$session.get('basket'));\n        },\n\n        checkOut() {\n            let str = \"\";\n            for(let i = 0;i < this.basket.length;i++)\n            {\n                if(i !== this.basket.length - 1)\n                {\n                    str = str+\"nb\"+i+\"=\"+this.basket[i].mod_src+\"&\";\n                }\n                else\n                {\n                    str = str+\"nb\"+i+\"=\"+this.basket[i].mod_src;\n                }\n            }\n            console.log(str);\n            console.log(this.basket);\n            axios.get('http://89.157.15.147:3000/download?'+str,{\n                responseType: 'arraybuffer',\n                headers: {\n                    'Content-Type': 'application/zip',\n                }})\n                .then((response) => {\n                    let blob = new Blob([response.data], { type: \"application/zip\" }),\n                        url = window.URL.createObjectURL(blob);\n                    window.open(url, \"_self\");\n                })\n                .catch(function (error) {\n                    console.log(error);\n                });\n        }\n    }\n};\n",{"version":3,"sources":["basket.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"basket.vue","sourceRoot":"src/components/pages","sourcesContent":["<template>\r\n<div class=\"container\">\r\n    <div v-if=\"this.$session.exists()\">\r\n        <ul v-for=\"item in this.basket\" class=\"itemContainer\">\r\n            <li>{{ item.title }}\r\n                <b-button variant=\"danger\" class=\"vBtn\" @click=\"removeFromBasket(item.id)\">Retirer</b-button>\r\n            </li>\r\n        </ul>\r\n\r\n        \r\n    </div>\r\n    <div v-else>\r\n        <p>il faut vous connecter</p>\r\n    </div>\r\n<div v-if=\"this.basket.length == 0\">\r\n\t<h1>Votre panier est vide</h1>\r\n</div>\r\n<div v-else>\r\n\t<b-button variant=\"primary\" @click=\"checkOut()\">Valider</b-button>\r\n</div>\r\n</div>\r\n\r\n</template>\r\n\r\n<script>\r\n    import axios from '../../../node_modules/axios'\r\n    export default {\r\n        name: \"basket\",\r\n        data(){\r\n            return {\r\n                basket: this.$session.get('basket'),\r\n            }\r\n        },\r\n        methods : {\r\n            removeFromBasket(id) {\r\n                for (let i = 0; i < this.basket.length; i++) {\r\n                    if (this.basket[i].id == id) {\r\n                        this.basket.splice(i, 1);\r\n                        this.$session.set('basket', this.basket);\r\n                    }\r\n                }\r\n                console.log(this.$session.get('basket'));\r\n            },\r\n\r\n            checkOut() {\r\n                let str = \"\";\r\n                for(let i = 0;i < this.basket.length;i++)\r\n                {\r\n                    if(i !== this.basket.length - 1)\r\n                    {\r\n                        str = str+\"nb\"+i+\"=\"+this.basket[i].mod_src+\"&\";\r\n                    }\r\n                    else\r\n                    {\r\n                        str = str+\"nb\"+i+\"=\"+this.basket[i].mod_src;\r\n                    }\r\n                }\r\n                console.log(str);\r\n                console.log(this.basket);\r\n                axios.get('http://89.157.15.147:3000/download?'+str,{\r\n                    responseType: 'arraybuffer',\r\n                    headers: {\r\n                        'Content-Type': 'application/zip',\r\n                    }})\r\n                    .then((response) => {\r\n                        let blob = new Blob([response.data], { type: \"application/zip\" }),\r\n                            url = window.URL.createObjectURL(blob);\r\n                        window.open(url, \"_self\");\r\n                    })\r\n                    .catch(function (error) {\r\n                        console.log(error);\r\n                    });\r\n            }\r\n        }\r\n    };\r\n</script>\r\n\r\n<style scoped>\r\n.vBtn\r\n{\r\n\talign: right;\r\n}\r\n    ul\r\n    {\r\n        list-style-type: none;\r\n    }\r\n.itemContainer\r\n{\r\n    width: 100%;\r\n    height: 40px;\r\n    background: lightgrey;\r\n    color: white;\r\n\theight: 40px;\r\n}\r\n\r\n.itemContainer li\r\n{\r\n\tfont-weight: bold;\r\n\tcolor: #000\r\n}\r\n</style>\r\n"]}]}